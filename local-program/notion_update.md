# ğŸ“¡ í†µì‹  í”„ë¡œí† ì½œ & ë°ì´í„° ëª…ì„¸ (Notion ì—…ë°ì´íŠ¸ìš©)

> ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ë…¸ì…˜ì˜ [Flow B]ì™€ [Flow C] ì„¹ì…˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.

---

### **[Flow B] Replit Server â†’ Local Agent (ëª…ë ¹ í•˜ë‹¬)**
> "ì´ì œ ì†ì„ ì›€ì§ì¼ ì°¨ë¡€ì•¼"

ì„œë²„ê°€ ë¡œì»¬ ì—ì´ì „íŠ¸ì—ê²Œ êµ¬ì²´ì ì¸ í–‰ë™ì„ ì§€ì‹œí•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ ì˜¤ë””ì˜¤ë§Œ ì¬ìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‚¬ìš©ìì˜ PCë¥¼ ì§ì ‘ ì œì–´í•˜ê¸° ìœ„í•´ **ì •í™•í•œ Actionê³¼ Parameter**ê°€ í•„ìš”í•©ë‹ˆë‹¤.

- **Event**: `websocket.send()`
- **í•„ìš”ì„±**: 
  - ì—ì´ì „íŠ¸ê°€ "ì–´ë–¤ í‚¤ë¥¼ ëˆŒëŸ¬ì•¼ í•˜ëŠ”ì§€", "ì–´ë””ë¡œ ì´ë™í•´ì•¼ í•˜ëŠ”ì§€" ì•Œê¸° ìœ„í•´ì„œëŠ” êµ¬ì²´ì ì¸ **Action(ë™ì‘)** ì •ì˜ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.
  - ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ **ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ë ¹ì–´(Executable Command)** í˜•íƒœë¡œ ì „ë‹¬ë˜ì–´ì•¼ ì˜¤ì‘ë™ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Data Format (JSON)**
```json
{
  "source": "server",           // [í•„ìˆ˜] ë°œì‹ ì ì‹ë³„ (server/replit)
  "data": {
    "action": "GOTO_LINE",      // [í•„ìˆ˜] ìˆ˜í–‰í•  êµ¬ì²´ì  ë™ì‘ (GOTO_LINE, TYPE_CODE ë“±)
    "params": {                 // [í•„ìˆ˜] ë™ì‘ì— í•„ìš”í•œ ë°ì´í„°
      "line": 25,
      "text": "print('Hello')"  // TYPE_CODEì¼ ê²½ìš°
    },
    "audio_url": "https://..."  // [ì„ íƒ] ElevenLabs ìŒì„± URL (ìˆìœ¼ë©´ ë¡œì»¬ì—ì„œ ì¬ìƒ)
  }
}
```

---

### **[Flow C] Local Agent â†’ Replit Server (ì‹¤ì‹œê°„ ìƒíƒœ ë³´ê³ )**
> "ì§€ê¸ˆ ë‚´ ìƒí™©ì€ ì´ë˜"

ë¡œì»¬ ì—ì´ì „íŠ¸ê°€ 1ì´ˆë§ˆë‹¤ ìì‹ ì˜ ìƒíƒœ(í˜„ì¬ ë³´ê³  ìˆëŠ” ì°½, ì‘ì—… ì™„ë£Œ ì—¬ë¶€ ë“±)ë¥¼ ì„œë²„ì— ë³´ê³ í•©ë‹ˆë‹¤.

- **Event**: `websocket.send()` (1ì´ˆ ì£¼ê¸°)
- **í•„ìš”ì„±**: 
  - **Safety (ì•ˆì „ì¥ì¹˜)**: ì‚¬ìš©ìê°€ VS Codeê°€ ì•„ë‹Œ ì—‰ëš±í•œ ì°½(ì˜ˆ: ì¹´í†¡, ìœ íŠœë¸Œ)ì„ ë³´ê³  ìˆì„ ë•Œ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëŒ€ì°¸ì‚¬ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤. ì„œë²„ëŠ” ì´ ìƒíƒœë¥¼ ë³´ê³  ëª…ë ¹ ì „ì†¡ì„ **ì¼ì‹œ ì¤‘ì§€(Block)**í•´ì•¼ í•©ë‹ˆë‹¤.
  - **Synchronization (ë™ê¸°í™”)**: ë¡œì»¬ì—ì„œì˜ í‚¤ë³´ë“œ ì…ë ¥ì´ ëë‚¬ëŠ”ì§€ ì„œë²„ê°€ ì•Œì•„ì•¼, ê·¸ ë‹¤ìŒ ì˜¤ë””ì˜¤ ì„¤ëª…ì„ ì´ì–´ì„œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ("ë‹¤ ì³¤ì–´?" -> "ì‘ ë‹¤ ì³¤ì–´" -> "ê·¸ëŸ¼ ë‹¤ìŒ ì„¤ëª…í• ê²Œ")

**Data Format (JSON)**
```json
{
  "source": "local",            // [í•„ìˆ˜] ë°œì‹ ì ì‹ë³„
  "data": {
    "type": "local_status",     // [í•„ìˆ˜] ë©”ì‹œì§€ íƒ€ì…
    "active_window": "Visual Studio Code - main.py", // [í•µì‹¬] í˜„ì¬ í™œì„±í™”ëœ ì°½ ì œëª©
    "is_vscode": true,          // [í¸ì˜] VS Code í™œì„±í™” ì—¬ë¶€ flag
    "urgent": false,            // [ì„ íƒ] ê¸´ê¸‰ ì¤‘ì§€ í•„ìš” ì—¬ë¶€
    "timestamp": "2026-02-01 12:34:56"
  }
}
```
